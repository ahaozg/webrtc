# 弹窗组件设计
### 1. 设计思路
- 主体功能点分析
  - - [x] 根据点击定位元素位置自动定位弹窗组件位置
  - - [x] 根据可视区域位置或者滚动条位置自动判断是定位在定位元素的上面还是下面
  - - [x] 点击定位元素之外位置，自动隐藏
  - - [x] 若此时有滚动条，定位元素滚动到视图外面，则弹窗自动隐藏
  - - [x] 窗口`resize`，弹窗自动重新定位
  - - [x] 多个相同弹窗可共用一个框


- 扩展功能点分析

    - - [x] 可将弹窗组件放置在`body`下
    - - [x] 可自定义`class`

- 核心原理分析
    -  使用`@popperjs/core`来实现自动定位
    
### 2. 功能实现


1.  组件结构设计
  - html + css

2.  组件对外接口设计
  - 参数接口
    - props
      - value
        - 默认是否展示
      - linkId
        - 链接定位元素id
      - trigger
        - 触发方式
      - width
        - 弹窗宽度
      - hideArrow
        - 是否隐藏箭头
      - transfer
        - 是否将弹层放置在`body`上
      - popperClass
        - 自定义class,  您也可以直接使用class
      - offset
        - 偏移量
      - placement
        - 出现位置
      - strategy
        - 策略
      - onFirstUpdate
        - 创建完成后第一次更新后的回调   ps:linkId变化后，会再次触发onFirstUpdate
      - onShowFun
        - 展示时触发的回调
      - onHideFun
        - 隐藏时触发的回调
      - options
        - 自定义popperInstance的配置项，可参考 [官网](https://popper.js.org/)
  - 其他接口
    - data
      - popperInstanc
        - popper 实例
      - posEl
        - 定位元素
      - visible
        - 当前弹窗组件是否展示状态
    - computed
      - getPosElEventByTrigger
        - 计算用于定位元素的事件
      - getClass
        - 获取class
    - watch
      - linkld
      - visible
   - 方法接口
      - methods
  - 事件接口
      - $emit
          - `this.$emit('change', this.vasible)`

### 3. 在线demo
[demo](http://fd.thunisoft.com:9999/#/popup/poptip/case1)

